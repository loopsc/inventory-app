<html>

<head>
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" href="/styles.css">
    <!-- Form Multi Select -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Include jQuery and Select2 first -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <!-- Then initialize Select2 in a separate script tag -->
    <script>
        $(document).ready(function () {
            $('.js-example-basic-multiple').select2({
                placeholder: "Select genres",
                allowClear: true
            });
        });
    </script>


</head>

<body>
    <main class="content">
        <h1 class="heading">
            <%= title %>
        </h1>

        <%- include('./partials/navbar') %>

            <h2>Updating: <%= title %>
            </h2>
            <form action="/update/:bookId" method="POST" class="form">
                <div class="inputGroup">
                    <label for="title">Title: </label>
                    <input type="text" name="title" id="title" value="<%= book.title %>" required>
                </div>
                <div class="inputGroup">
                    <label for="author">Author: </label>
                    <input type="text" name="author" id="author" value="<%= book.author %>" required>
                </div>
                <div class="inputGroup">
                    <label for="genres">Generes: </label>
                    <select style="width: 100%;" class="js-example-basic-multiple" name="genres" id="genres" multiple>
                        <option value="fantasy" <%=book.genres.includes('fantasy') ? 'selected' : '' %>>Fantasy</option>
                        <option value="scifi" <%=book.genres.includes('scifi') ? 'selected' : '' %>>Sci-Fi</option>
                        <option value="mystery" <%=book.genres.includes('mystery') ? 'selected' : '' %>>Mystery</option>
                        <option value="psychological" <%=book.genres.includes('psychological') ? 'selected' : '' %>
                            >Psychological</option>
                        <option value="philosophy" <%=book.genres.includes('philosophy') ? 'selected' : '' %>>Philosophy
                        </option>
                        <option value="crime" <%=book.genres.includes('crime') ? 'selected' : '' %>>Crime</option>
                    </select>
                </div>
                <fieldset>
                    <legend>Fiction or Non-fiction?</legend>
                    <input type="radio" id="fiction" name="isFiction" value="fiction" <%=book.isFiction ? 'checked' : ''
                        %> required>
                    <label for="fiction">Fiction</label><br />

                    <input type="radio" id="non-fiction" name="isFiction" value="non-fiction" <%=!book.isFiction
                        ? 'checked' : '' %>>
                    <label for="non-fiction">Non-fiction</label><br />
                </fieldset>

                <fieldset>
                    <legend>Have you read this book?</legend>
                    <input type="radio" id="read" name="isRead" value="read" <%=book.isRead ? 'checked' : '' %>
                    required>
                    <label for="read">Read</label><br />

                    <input type="radio" id="no-read" name="isRead" value="not-read" <%=!book.isRead ? 'checked' : '' %>>
                    <label for="no-read">Not Read</label><br />
                </fieldset>
                <button type="submit">Update</button>
            </form>
    </main>

</body>

</html>